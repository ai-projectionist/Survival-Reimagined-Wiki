"use strict";(self.webpackChunkinsights=self.webpackChunkinsights||[]).push([[566],{255:(e,t,s)=>{s.d(t,{d:()=>a});var l=s(43);function a(e,t){const[s,a]=(0,l.useState)(e);return(0,l.useEffect)((()=>{const s=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(s)}}),[e,t]),s}},523:(e,t,s)=>{s.d(t,{A:()=>c});var l=s(43),a=s(950),n=s(214),r=s(546),i=s(579);const c=e=>{let{atlasName:t,displayName:s,tooltipContent:c}=e;const{inventoryAtlas:o}=(0,l.useContext)(n.D),d=o[t],[h,u]=(0,l.useState)(!1),[p,m]=(0,l.useState)({top:0,left:0}),[v,g]=(0,l.useState)(!1),[f,x]=(0,l.useState)({width:63,height:63}),j=(0,l.useRef)(null),N=(0,l.useRef)(null),w=(0,l.useRef)(null);(0,l.useEffect)((()=>{w.current=document.getElementById("tooltip-root")}),[]),(0,l.useEffect)((()=>{if(!d)return;const e=new Image,t=d.u1,s=d.u2,l=d.v1,a=d.v2,n=`${r.u8}${d.texture}`;return e.onload=()=>{const n=j.current;if(!n)return;const r=n.getContext("2d"),i=e.naturalWidth,c=e.naturalHeight,o=t*i,d=(1-a)*c,h=Math.max(1,(s-t)*i),u=Math.max(1,(a-l)*c);n.width=h,n.height=u,x({width:h,height:u}),r.clearRect(0,0,n.width,n.height),r.drawImage(e,o,d,h,u,0,0,n.width,n.height),g(!0)},e.onerror=()=>{console.error(`Failed to load image: ${n}`),g(!1)},e.src="/Survival-Reimagined-Wiki"+n,()=>{e.onload=null,e.onerror=null}}),[d]);return(0,i.jsxs)("div",{ref:N,className:"cropped-image-wrapper",style:{width:`${f.width}px`,height:`${f.height}px`},onMouseEnter:e=>{u(!0);const t=e.currentTarget.getBoundingClientRect();m({top:t.top+window.scrollY-10,left:t.left+window.scrollX+t.width/2})},onMouseLeave:()=>{u(!1)},children:[(0,i.jsx)("canvas",{ref:j,className:"cropped-image-canvas "+(v?"loaded":"")}),!v&&f.width>1&&(0,i.jsx)("div",{className:"loading-placeholder"}),h&&w.current&&(0,a.createPortal)((0,i.jsx)("div",{className:"image-tooltip",style:{top:`${p.top}px`,left:`${p.left}px`},children:c||(s||"Name missing?")}),w.current)]})}},566:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var l=s(43),a=s(214),n=s(255),r=s(523),i=s(546),c=s(579);const o=e=>{let{recipe:t}=e;const{recipes:s}=(0,l.useContext)(a.D),n=e=>s.find((t=>t.prefab===e.prefab));return(0,c.jsxs)("div",{className:"recipe",children:[(0,c.jsx)("div",{className:"result-item",children:(0,c.jsx)(r.A,{atlasName:t.prefab,displayName:t.name})}),(0,c.jsx)("span",{className:"equals",children:"="}),(0,c.jsx)("div",{className:"ingredients",children:t.ingredients.length>0?t.ingredients.map((e=>{var t,s;return(0,c.jsxs)("div",{className:"ingredient-item",children:[(0,c.jsx)(r.A,{atlasName:e.prefab,displayName:e.name,tooltipContent:(0,c.jsx)("div",{children:(null===(t=n(e))||void 0===t||null===(s=t.ingredients)||void 0===s?void 0:s.length)>0?(0,c.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:"4px"},children:n(e).ingredients.map((e=>(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)(r.A,{atlasName:e.prefab,displayName:e.name}),e.amount>1&&(0,c.jsxs)("span",{style:{marginLeft:"2px"},children:["x",e.amount]})]},e.prefab)))}):(0,c.jsx)("div",{children:e.name.replace(/\*/g,"")})})}),e.amount>1&&(0,c.jsx)("span",{className:"amount",children:e.amount})]},e.prefab)})):(0,c.jsx)("span",{className:"no-ingredients",children:"(No ingredients listed)"})}),t.techLevels&&Object.keys(t.techLevels).length>0&&(0,c.jsx)("div",{className:"tech-levels",children:Object.entries(t.techLevels).map((e=>{let[t,s]=e;const l=i.Tb.find((e=>e.techLevel===t&&e.level===s));return(0,c.jsx)("span",{className:"tech-level",children:(null===l||void 0===l?void 0:l.name)||t},`${t}-${s}`)}))})]})};var d=s(306);const h=e=>{let{techs:t,selectedTech:s,setSelectedTech:l}=e;const a=[{value:"-0",label:"All Tech Levels"},...t.map((e=>({value:`${e.techLevel}-${e.level}`,label:e.name})))],n=a.find((e=>e.value===`${s.techLevel}-${s.level}`))||a[0];return(0,c.jsx)("div",{className:"tech-level-filter",children:(0,c.jsx)(d.Ay,{value:n,onChange:e=>l(e.value),options:a,className:"tech-level-select",classNamePrefix:"tech-select",isSearchable:!1,menuPlacement:"auto"})})};var u=s(683);const p=()=>{const[e,t]=(0,l.useState)(""),{recipes:s}=(0,l.useContext)(a.D),[r,d]=(0,l.useState)({techLevel:"",level:0}),p=(0,n.d)(e,300),m=(0,l.useMemo)((()=>r.techLevel||p?s.map((e=>{const[t,s]=((e,t)=>{var s;const l=t.toLowerCase(),a=(e.name||"").toLowerCase(),n=(e.prefab||"").toLowerCase(),r=(0,u.d)(e.name||"").toLowerCase(),i=(0,u.d)(e.prefab||"").toLowerCase();let c=9999,o=-1;return null===(s=e.ingredients)||void 0===s||s.forEach(((e,t)=>{const s=(e.name||"").toLowerCase(),a=(e.prefab||"").toLowerCase();let n=9999;s===l||a===l?n=0:(s.includes(l)||a.includes(l))&&(n=2),n<c&&(c=n,o=t)})),a===l||n===l?[0,o]:r===l||i===l?[1,o]:a.includes(l)||n.includes(l)?[2,o]:r.includes(l)||i.includes(l)?[3,o]:c<9999?[4,o]:[9999,-1]})(e,p),l=((e,t)=>{if(t<=0||!e.ingredients)return e;const s={...e};s.ingredients=[...e.ingredients];const[l]=s.ingredients.splice(t,1);return s.ingredients.unshift(l),s})(e,s);return{recipe:l,score:t}})).filter((e=>{let{recipe:t,score:s}=e;return((e,t)=>{const s=!r.techLevel||e.techLevels&&e.techLevels[r.techLevel]===r.level,l=p.length>=3||r.techLevel||!p;return s&&(!p||t<9999)&&l})(t,s)})).sort(((e,t)=>e.score!==t.score?e.score-t.score:(e.recipe.name||"").localeCompare(t.recipe.name||""))).map((e=>{let{recipe:t}=e;return t})):[]),[s,p,r]);return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"search-filters",children:[(0,c.jsx)("input",{type:"text",placeholder:"Search by name or prefab...",value:e,onChange:e=>t(e.target.value),className:"search-input"}),(0,c.jsx)(h,{techs:i.Tb,selectedTech:r,setSelectedTech:e=>{const[t,s]=e.split("-");d({techLevel:t,level:parseInt(s)})}})]}),(0,c.jsx)("div",{className:"recipe-list-container",children:m.length>0?m.map(((e,t)=>(0,c.jsx)(o,{recipe:e},`${e.prefab}-${t}`))):(0,c.jsx)("div",{className:"loading",children:r.techLevel||p&&!(p.length<3)?"No matching recipes found.":"Enter at least 3 characters to search recipes or select a tech level."})})]})}},683:(e,t,s)=>{s.d(t,{d:()=>l});const l=e=>{if(!e)return"";return e.replace(/\.tex$/,"").split("_").map((e=>e?e.charAt(0).toUpperCase()+e.slice(1):"")).join(" ")}}}]);
//# sourceMappingURL=566.d3b6582d.chunk.js.map